<script>
  // ===== Form Submission Logic =====
  const form = document.getElementById('adminForm');   // <-- restore this line
  const msg = document.getElementById('msg');

  form.addEventListener('submit', async e => {
    e.preventDefault();

    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();

    try {
      const res = await fetch('/api/admin/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      });

      if (res.ok) {
        const j = await res.json();
        // Show success message in blue
        msg.textContent = "Login successful!";
        msg.className = "success";   // apply success style
        setTimeout(() => {
          location.href = j.redirect;  // redirect to dashboard
        }, 500);
      } else {
        const j = await res.json().catch(() => ({}));
        msg.textContent = j.error || 'Error logging in';
        msg.className = "error";     // apply error style
      }
    } catch (err) {
      msg.textContent = "Server unreachable";
      msg.className = "error";       // apply error style
    }
  });
</script>
