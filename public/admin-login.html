<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Admin Login ‚Äî Udderly the Same</title>
  <style>
    /* ---- Global Layout ---- */
    body { 
      font-family: Arial, sans-serif;       /* readable, common font */
      background: #f4f6f9;                  /* light gray background for contrast */
      display: flex;                        /* use flexbox to center card */
      justify-content: center;              /* horizontally center card */
      align-items: center;                  /* vertically center card */
      min-height: 100vh;                    /* full viewport height */
      margin: 0;                            /* remove default browser margins */
    }

    /* ---- Card Container ---- */
    .card { 
      background: #f4f6f9;                  /* same background as body for consistency */
      padding: 30px;                        /* inner spacing around content */
      border-radius: 16px;                  /* rounded corners for modern look */
      box-shadow: 0 8px 24px rgba(0,0,0,0.12); /* subtle shadow for depth */
      width: 100%;                          /* responsive width */
      max-width: 400px;                     /* limit width for readability */
      text-align: center;                   /* center text inside card */
    }

  /* -------------------- Logo Styling -------------------- */
  .logo {
    max-width:120px;       /* prevent logo from being too large */
    width:auto;            /* use natural width, don‚Äôt stretch full line */
    height:auto;           /* keep aspect ratio correct */
    margin:20px auto;      /* add vertical gap, auto centers horizontally */
    display:inline-block;  /* shrink clickable area to image size only */
    cursor:pointer;        /* show pointer cursor on hover */
  }

    /* ---- Heading ---- */
    h1 { 
      font-size: 32px;                      /* large heading for prominence */
      margin-bottom: 25px;                  /* space below heading */
      text-align: center;                   /* center heading text */
    }

    /* ---- Form Layout ---- */
    form { 
      display: flex;                        /* flexbox for vertical stacking */
      flex-direction: column;               /* stack inputs top-to-bottom */
      gap: 18px;                            /* consistent spacing between inputs */
      text-align: left;                     /* align labels/inputs to left */
    }
    label { 
      font-size: 16px;                      /* readable label size */
    }
    input { 
      font-size: 18px;                      /* larger input text for clarity */
      padding: 12px;                        /* inner spacing for comfort */
      border: 1px solid #ccc;               /* light gray border */
      border-radius: 8px;                   /* rounded corners */
    }

    /* ---- Button Styling ---- */
    button { 
      font-size: 20px;                      /* larger button text */
      padding: 16px;                        /* comfortable click area */
      background: #333;                     /* default dark background */
      color: #fff;                          /* white text for contrast */
      border: none;                         /* remove default border */
      border-radius: 8px;                   /* rounded corners */
      cursor: pointer;                      /* pointer cursor on hover */
    }
    button:hover { 
      background: #1976d2;                  /* blue hover color */
    }

    /* ---- Message Area ---- */
    #msg { 
      margin-top: 12px;                     /* space above message */
      font-size: 15px;                      /* smaller than form text */
      text-align: center;                   /* center message text */
      min-height: 20px;                     /* reserve space even when empty */
    }
    #msg.error { 
      color: red;                           /* red for error messages */
    }
    #msg.success { 
      color: blue;                          /* blue for success messages */
    }
  </style>
</head>
<body>

  <!-- ---- Login Card ---- -->
  <div class="card">

    <!-- Version info (top-right inside card) -->
    <div style="text-align:right; font-size:0.8em; color:gray; margin-top:10px;">
      Form Ver. 1.0.1r
    </div>

    <!-- Logo that links back to index.html -->
    <!-- Clicking logo takes user back to main index page -->
    <a href="/index.html">
      <img src="udderly-logo-admin.png" alt="Udderly the Same Logo" class="logo">
    </a>

    <!-- Page heading -->
    <h1>üõ°Ô∏è Admin Login</h1>

    <!-- Login form -->
    <!-- Collects username and password, then submits via JavaScript -->
    <form id="adminForm">
      <label for="username">Username</label>
      <input id="username" name="username" required />

      <label for="password">Password</label>
      <input id="password" name="password" type="password" required />

      <button type="submit">Login</button>
    </form>

    <!-- Error or success message -->
    <!-- Displays feedback after login attempt -->
    <div id="msg"></div>
  </div>
  
  <script>
    // ---- Form Submission Logic ----
    const form = document.getElementById('adminForm');   // reference to login form
    const msg = document.getElementById('msg');          // reference to message area
  
    // Add event listener for form submission
    form.addEventListener('submit', async e => {
      e.preventDefault(); // prevent default page reload
  
      // Get trimmed values from inputs
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();
  
      try {
        // Send login request to backend API
        const res = await fetch('/api/admin/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username, password })
        });
  
        if (res.ok) {
          const j = await res.json();
          // Show success message in blue
          msg.textContent = "Login successful!";
          msg.className = "success";   // apply success style
          setTimeout(() => {
            location.href = j.redirect;  // redirect to dashboard after short delay
          }, 500);
        } else {
          // Handle invalid login response
          const j = await res.json().catch(() => ({}));
          msg.textContent = j.error || 'Error logging in';
          msg.className = "error";     // apply error style
        }
      } catch (err) {
        // Handle network/server errors
        msg.textContent = "Server unreachable";
        msg.className = "error";       // apply error style
      }
    });
  </script>
</body>
</html>


